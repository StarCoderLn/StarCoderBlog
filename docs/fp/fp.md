[å‡½æ•°å¼ç¼–ç¨‹æœ¯è¯­](https://github.com/shfshanyue/fp-jargon-zh#product-type)

## :books: å‡½æ•°å¼ç¼–ç¨‹æ€ç»´

å‡½æ•°å¼ç¼–ç¨‹æ˜¯æ•°å­¦çš„æ¦‚å¿µï¼Œå†™å‡½æ•°å¼ç¼–ç¨‹çš„æ—¶å€™è„‘å­é‡Œæƒ³çš„æ˜¯æ•°å­¦é‡Œçš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ JavaScript é‡Œçš„å‡½æ•°ã€‚å› æ­¤ï¼Œå‡½æ•°å¼ç¼–ç¨‹å®é™…ä¸Šå°±æ˜¯æŠŠæ•°å­¦çš„æ€ç»´å¸¦åˆ°äº†å¼€å‘ä¸­ã€‚

### :blue_book: èŒƒç•´è®º(Category Theory)

1. å‡½æ•°å¼ç¼–ç¨‹æ˜¯èŒƒç•´è®ºçš„æ•°å­¦åˆ†æ”¯ï¼Œæ˜¯ä¸€é—¨å¾ˆå¤æ‚çš„æ•°å­¦ï¼Œè®¤ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰æ¦‚å¿µä½“ç³»éƒ½å¯ä»¥æŠ½è±¡æˆä¸€ä¸ªä¸ªèŒƒç•´ã€‚

2. å½¼æ­¤ä¹‹é—´å­˜åœ¨æŸç§å…³ç³»çš„æ¦‚å¿µã€äº‹ç‰©ã€å¯¹è±¡ç­‰ç­‰ï¼Œéƒ½æ„æˆèŒƒç•´ã€‚ä»»ä½•äº‹ç‰©åªè¦æ‰¾å‡ºä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå°±èƒ½å®šä¹‰èŒƒç•´ã€‚

3. ç®­å¤´è¡¨ç¤ºèŒƒç•´æˆå‘˜ä¹‹é—´çš„å…³ç³»ï¼Œæ­£å¼çš„åç§°å«ä½œâ€œ**æ€å°„**â€ã€‚

4. èŒƒç•´è®ºè®¤ä¸ºï¼ŒåŒä¸€ä¸ªèŒƒç•´çš„æ‰€æœ‰æˆå‘˜ï¼Œå°±æ˜¯ä¸åŒçŠ¶æ€çš„â€œå˜å½¢â€ã€‚é€šè¿‡â€œæ€å°„â€ï¼Œä¸€ä¸ªæˆå‘˜å¯ä»¥å˜å½¢æˆå¦ä¸€ä¸ªæˆå‘˜ã€‚

5. èŒƒç•´çš„å†…å®¹åŒ…å«ä¸¤ç‚¹ï¼š

ï¼ˆ1ï¼‰æ‰€æœ‰æˆå‘˜æ˜¯ä¸€ä¸ªé›†åˆã€‚

ï¼ˆ2ï¼‰å˜å½¢å…³ç³»æ˜¯å‡½æ•°ã€‚

### :blue_book: å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€ç†è®º

1. æ•°å­¦ä¸­çš„å‡½æ•°ä¹¦å†™å½¢å¼å¦‚å³ï¼šf(x)=yã€‚ä¸€ä¸ªå‡½æ•° fï¼Œä»¥ x ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›è¾“å‡º yã€‚è™½ç„¶è¿™ä¸ªæ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯å…¶ä¸­åŒ…å«å‡ ä¸ªå…³é”®ç‚¹ï¼š

- **å‡½æ•°å¿…é¡»æ€»æ˜¯æ¥å—ä¸€ä¸ªå‚æ•°ã€‚**

- **å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå€¼ã€‚**

- **å‡½æ•°åº”è¯¥ä¾æ®æ¥æ”¶åˆ°çš„å‚æ•°è€Œä¸æ˜¯å¤–éƒ¨ç¯å¢ƒè¿è¡Œã€‚**

- **å¯¹äºç»™å®šçš„ x åªä¼šè¾“å‡ºå”¯ä¸€çš„ yã€‚**

2. å‡½æ•°å¼ç¼–ç¨‹ä¸æ˜¯ç”¨å‡½æ•°æ¥ç¼–ç¨‹ï¼Œä¹Ÿä¸æ˜¯ä¼ ç»Ÿçš„é¢å‘è¿‡ç¨‹ç¼–ç¨‹ã€‚å®ƒçš„ä¸»æ—¨åœ¨äºå°†å¤æ‚çš„å‡½æ•°å¤åˆæˆç®€å•çš„å‡½æ•°ï¼ˆè®¡ç®—ç†è®ºã€é€’å½’è®ºæˆ–è€…æ‹‰è¾¾å§†æ¼”ç®—ï¼‰ã€‚**è¿ç®—è¿‡ç¨‹å°½é‡å†™æˆä¸€ç³»åˆ—çš„å‡½æ•°åµŒå¥—ã€‚**

3. é€šä¿—çš„å†™æ³•æ˜¯ function xx() {}ã€‚è¦åŒºåˆ†å¼€å‡½æ•°å’Œæ–¹æ³•ï¼Œ**æ–¹æ³•è¦ä¸æŒ‡å®šçš„å¯¹è±¡ç»‘å®šï¼Œå‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚**

4. å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰å…¶å®ç›¸å¯¹äºè®¡ç®—æœºçš„å†å²è€Œè¨€æ˜¯ä¸€ä¸ªéå¸¸å¤è€çš„æ¦‚å¿µï¼Œç”šè‡³æ—©äºç¬¬ä¸€å°è®¡ç®—æœºçš„è¯ç”Ÿã€‚å‡½æ•°å¼ç¼–ç¨‹çš„åŸºç¡€æ¨¡å‹æ¥æºäº **Î»ï¼ˆLambdaï¼‰ æ¼”ç®—ï¼ˆå³æ‹‰è¾¾å§†æ¼”ç®—ï¼‰**ï¼Œè€Œ Î» æ¼”ç®—å¹¶éè®¾è®¡äºåœ¨è®¡ç®—æœºä¸Šæ‰§è¡Œï¼Œå®ƒæ˜¯åœ¨20ä¸–çºªä¸‰åå¹´ä»£å¼•å…¥çš„ä¸€å¥—ç”¨äºç ”ç©¶å‡½æ•°å®šä¹‰ã€å‡½æ•°åº”ç”¨å’Œé€’å½’çš„å½¢å¼ç³»ç»Ÿã€‚

5. JavaScript æ˜¯æŠ«ç€ C å¤–è¡£çš„ [Lisp](https://www.yiibai.com/lisp/lisp_overview.html)ã€‚Lisp æ˜¯ä¸€ç§çº¯å‡½æ•°å¼ç¼–ç¨‹çš„è¯­è¨€ã€‚

6. å‡½æ•°å¼ç¼–ç¨‹çœŸæ­£çš„ç«çƒ­æ˜¯éšç€ React çš„é«˜é˜¶å‡½æ•°è€Œé€æ­¥å‡æ¸©çš„ã€‚

7. **å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘**ã€‚æ‰€è°“â€œç¬¬ä¸€ç­‰å…¬æ°‘â€ï¼ˆfirst classï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶å®ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼ã€‚

8. **ä¸å¯æ”¹å˜é‡**

æˆ‘ä»¬é€šå¸¸ç†è§£çš„å˜é‡åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ä¹Ÿè¢«å‡½æ•°æ›¿ä»£äº†ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­å˜é‡ä»…ä»…ä»£è¡¨æŸä¸ªè¡¨è¾¾å¼ã€‚è¿™é‡Œæ‰€è¯´çš„å˜é‡æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ï¼Œæ‰€æœ‰çš„å˜é‡åªèƒ½è¢«èµ‹ä¸€æ¬¡åˆå€¼ã€‚**å‡½æ•°å¼ç¼–ç¨‹é‡Œçš„å€¼å…¨éƒ¨æ˜¯é ä¼ é€’çš„ï¼Œä¸èƒ½æ”¹å®ƒ**ã€‚å‡½æ•°å¼ç¼–ç¨‹æœ€è®²ç©¶çš„å°±æ˜¯çº¯ï¼

9. `map` å’Œ `reduce` æ˜¯å‡½æ•°å¼ç¼–ç¨‹æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚

::: tip ç‰¢è®°ä»¥ä¸‹å‡ ç‚¹
1. å‡½æ•°æ˜¯â€œç¬¬ä¸€ç­‰å…¬æ°‘â€

2. åªç”¨â€œè¡¨è¾¾å¼â€ï¼Œä¸ç”¨â€œè¯­å¥â€

3. æ²¡æœ‰â€œå‰¯ä½œç”¨â€

4. ä¸ä¿®æ”¹çŠ¶æ€

5. å¼•ç”¨é€æ˜ï¼ˆå‡½æ•°è¿è¡Œåªé å‚æ•°ä¸”ç›¸åŒçš„è¾“å…¥æ€»æ˜¯è·å¾—ç›¸åŒçš„è¾“å‡ºï¼‰ï¼Œæ¯”å¦‚ identity = (i) { return i }ï¼Œè¿™é‡Œè°ƒç”¨ identity(1) çš„æ•ˆæœå¯ä»¥ç›´æ¥æ›¿æ¢ä¸º 1ï¼Œè¯¥è¿‡ç¨‹è¢«ç§°ä¸ºæ›¿æ¢æ¨¡å‹ã€‚
:::

## :books: å‡½æ•°å¼ç¼–ç¨‹æ ¸å¿ƒæ¦‚å¿µ

- çº¯å‡½æ•°

- ååº”ç”¨å‡½æ•°ã€å‡½æ•°çš„æŸ¯é‡ŒåŒ–

- å‡½æ•°ç»„åˆ

- Point Free

- å£°æ˜å¼ä¸å‘½ä»¤å¼ä»£ç 

- æƒ°æ€§æ±‚å€¼

### :blue_book: çº¯å‡½æ•°

- å¯¹äºç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ï¼Œä¹Ÿä¸ä¾èµ–å¤–éƒ¨ç¯å¢ƒçš„çŠ¶æ€ã€‚æ¯”å¦‚ slice æ˜¯çº¯å‡½æ•°ï¼Œä½†æ˜¯ splice ä¸æ˜¯çº¯å‡½æ•°ã€‚

- å®é™…å¼€å‘è¿‡ç¨‹ä¸­æ²¡æ³•ä¿è¯æ‰€æœ‰çš„å‡½æ•°éƒ½å¾ˆçº¯ï¼Œä½†æ˜¯è¦æ˜ç™½æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯è®©å‡½æ•°å°½é‡çš„çº¯ã€‚

- ä¼˜ç‚¹

ï¼ˆ1ï¼‰çº¯å‡½æ•°ä¸ä»…å¯ä»¥æœ‰æ•ˆé™ä½ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œè¿˜æœ‰å¾ˆå¤šå¾ˆæ£’çš„ç‰¹æ€§ï¼Œæ¯”å¦‚å¯ç¼“å­˜æ€§ã€‚

```js
import _ from 'lodash';

var sin = _memorize(x => Math.sin(x));

// ç¬¬ä¸€æ¬¡è®¡ç®—çš„æ—¶å€™ä¼šç¨æ…¢ä¸€ç‚¹
var a = sin(1);

// ç¬¬äºŒæ¬¡æœ‰äº†ç¼“å­˜ï¼Œé€Ÿåº¦æå¿«
var b = sin(1);
```

ï¼ˆ2ï¼‰ä¸‹é¢çš„ä»£ç åœ¨ä¸çº¯çš„ç‰ˆæœ¬ä¸­ï¼Œcheckage ä¸ä»…å–å†³äº ageï¼Œè¿˜ä¾èµ–äºå¤–éƒ¨å˜é‡ minã€‚çº¯çš„ checkage æŠŠå…³é”®æ•°å­—18ç¡¬ç¼–ç åœ¨å‡½æ•°å†…éƒ¨ï¼Œæ‰©å±•æ€§æ¯”è¾ƒå·®ï¼Œå¯ä»¥ç”¨æŸ¯é‡ŒåŒ–ä¼˜é›…åœ°æ”¹å†™çº¯å‡½æ•°æ¥è§£å†³ã€‚

```js
// ä¸çº¯çš„
var min = 18;
var checkage = age => age > min;

// çº¯çš„
var checkage = age => age > 18;
```

### :blue_book: çº¯åº¦å’Œå¹‚ç­‰æ€§

- å¹‚ç­‰æ€§æ˜¯æŒ‡**æ‰§è¡Œæ— æ•°æ¬¡åè¿˜å…·æœ‰ç›¸åŒçš„æ•ˆæœ**ï¼ŒåŒä¸€çš„å‚æ•°è¿è¡Œä¸€æ¬¡å‡½æ•°åº”è¯¥ä¸è¿ç»­è¿è¡Œä¸¤æ¬¡çš„ç»“æœä¸€è‡´ã€‚

- å¹‚ç­‰æ€§åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ä¸çº¯åº¦ç›¸å…³ï¼Œä½†åˆä¸ä¸€è‡´ã€‚

```js
Math.abs(Math.abs(-42));
```

### :blue_book: ååº”ç”¨å‡½æ•°

```js
// ååº”ç”¨å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°å’Œè¯¥å‡½æ•°çš„éƒ¨åˆ†å‚æ•°
const partial = (f, ...args) => 
    (...moreArgs) =>
        f(...args, moreArgs)
```

æ¯”å¦‚ï¼š

```js
const add3 = (a, b, c) => a + b + c

// ååº”ç”¨2ã€3åˆ° add3
const fivePlus = partial(add3, 2, 3);
fivePlus(4);

// bind å®ç°ï¼Œå°±æ˜¯ååº”ç”¨å‡½æ•°çš„ä¸€ç§å®ç°
const add1More = add3.bind(null, 2, 3); // add1More(c) => 2 + 3 + c
```

### :blue_book: å‡½æ•°çš„æŸ¯é‡ŒåŒ–

- æŸ¯é‡ŒåŒ–ï¼ˆCurryï¼‰é€šè¿‡ååº”ç”¨å‡½æ•°å®ç°ã€‚å®ƒæ˜¯æŠŠä¸€ä¸ªå¤šå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªåµŒå¥—ä¸€å…ƒå‡½æ•°çš„è¿‡ç¨‹ã€‚

- ä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒå»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚

```js
var checkage = min => (age => age > min);
var checkage18 = checkage(18);
checkage18(20);
```

- æŸ¯é‡ŒåŒ–çš„ä¼˜ç‚¹

æŸ¯é‡ŒåŒ–ä¸ä»…èƒ½å¤Ÿè§£å†³çº¯å‡½æ•°çš„ç¡¬ç¼–ç é—®é¢˜ï¼Œäº‹å®ä¸ŠæŸ¯é‡ŒåŒ–è¿˜æ˜¯ä¸€ç§â€œé¢„åŠ è½½â€å‡½æ•°çš„æ–¹æ³•ï¼Œé€šè¿‡ä¼ é€’è¾ƒå°‘çš„å‚æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªå·²ç»è®°ä½äº†è¿™äº›å‚æ•°çš„æ–°å‡½æ•°ï¼ŒæŸç§æ„ä¹‰ä¸Šæ¥è®²ï¼Œè¿™æ˜¯ä¸€ç§å¯¹å‚æ•°çš„â€œç¼“å­˜â€ï¼Œæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„ç¼–å†™å‡½æ•°çš„æ–¹æ³•ã€‚

```js
import { curry } from 'lodash';

var match = curry((reg, str) => str.match(reg));
var filter = curry((f, arr) => arr.filter(f));
var haveSpace = match(/\s+g/);

haveSpace('fffffff');
haveSpace('a  b');

filter(haveSpace, ['abcdefg', 'Hello World']);
filter(haveSpace)(['abcdefg', 'Hello World']);
```

```js
function foo(p1, p2) {
    this.val = p1 + p2;
}
var bar = foo.bind(null, 'p1');
var baz = new bar('p2');
console.log(baz.val);
```

### :blue_book: å‡½æ•°çš„åæŸ¯é‡ŒåŒ–

- å‡½æ•°çš„æŸ¯é‡ŒåŒ–ï¼Œæ˜¯å›ºå®šéƒ¨åˆ†å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ¥å—å‰©ä½™å‚æ•°çš„å‡½æ•°ï¼Œä¹Ÿç§°ä¸ºéƒ¨åˆ†è®¡ç®—å‡½æ•°ï¼Œ**ç›®çš„æ˜¯ä¸ºäº†ç¼©å°é€‚ç”¨èŒƒå›´ï¼Œåˆ›å»ºä¸€ä¸ªé’ˆå¯¹æ€§æ›´å¼ºçš„å‡½æ•°**ã€‚

```js
// æŸ¯é‡ŒåŒ–ä¹‹å‰
function add(x, y) {
    return x + y;
}
add(1, 2); // 3

// æŸ¯é‡ŒåŒ–ä¹‹å
function addX(y) {
    return function(x) {
        return x + y;
    }
}
addX(2)(1); // 3
```

```js
// æ‰‹å†™ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°
const curry = (fn, arr = []) => 
    (...args) => 
        (arg => (arg.length === fn.length ? fn(...arg) : curry(fn, arg)))([...arr, ...args])

let curryTest = curry((a, b, c, d) => a + b + c + d);
curryTest(1, 2, 3)(4); // 10
curryTest(1, 2)(3)(4); // 10
curryTest(1, 2)(3, 4); // 10
```

- åæŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œä»å­—é¢ä¸Šçœ‹ï¼Œæ„ä¹‰å’Œç”¨æ³•è·Ÿå‡½æ•°æŸ¯é‡ŒåŒ–æ­£å¥½ç›¸åï¼Œ**ç›®çš„æ˜¯æ‰©å¤§é€‚ç”¨èŒƒå›´ï¼Œåˆ›å»ºä¸€ä¸ªåº”ç”¨èŒƒå›´æ›´å¹¿çš„å‡½æ•°**ã€‚ä½¿å¾—åŸæœ¬åªæœ‰ç‰¹å®šå¯¹è±¡æ‰é€‚ç”¨çš„æ–¹æ³•ï¼Œæ‰©å±•åˆ°æ›´å¤šçš„å¯¹è±¡ã€‚

```js
// æ‰‹å†™ä¸€ä¸ªåæŸ¯é‡ŒåŒ–å‡½æ•°
Function.prototype.unCurring = function() {
    var that = this;
    return function() {
        var obj = Array.prototype.shift.call(arguments);
        return that.apply(obj, arguments);
    }
}
var push = Array.prototype.push.unCurring(), obj = {};
push(obj, 'first', 'two');
console.log(obj);
```

### :blue_book: æŸ¯é‡ŒåŒ–å’Œååº”ç”¨çš„åŒºåˆ«

- æŸ¯é‡ŒåŒ–çš„å‚æ•°åˆ—è¡¨æ˜¯**ä»å·¦å‘å³**çš„ã€‚å¦‚æœä½¿ç”¨ setTimeout è¿™ç§å°±å¾—é¢å¤–çš„å°è£…ã€‚

```js
const setTimeoutWrapper = (timeout, fn) => {
    setTimeout(fn, timeout);
}
const delayTenMs = _.curry(setTimeoutWrapper)(10);
delayTenMs(() => console.log('Do x Task'));
delayTenMs(() => console.log('Do y Task'));
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼ŒsetTimeoutWrapper æ˜¾å¾—å¤šä½™ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨ååº”ç”¨å‡½æ•°ã€‚ä½¿ç”¨ Curry å’Œ Partial éƒ½æ˜¯ä¸ºäº†è®©å‡½æ•°å‚æ•°æˆ–å‡½æ•°è®¾ç½®å˜å¾—æ›´åŠ ç®€å•å’Œå¼ºå¤§ã€‚

- Curry å’Œ Partial çš„å®ç°å¯ä»¥å‚è€ƒ [lodash](https://www.lodashjs.com/)ã€‚

### :blue_book: å‡½æ•°ç»„åˆ

- çº¯å‡½æ•°ä»¥åŠå¦‚ä½•æŠŠå®ƒæŸ¯é‡ŒåŒ–ä¼šå†™å‡ºæ´‹è‘±ğŸ§…ä»£ç  h(g(f(x)))ï¼Œä¸ºäº†è§£å†³å‡½æ•°åµŒå¥—çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å‡½æ•°ç»„åˆã€‚

```js
const compose = (f, g) => (x => f(g(x)));
const first = arr => arr[0];
const reverse = arr => arr.reverse();
const getLast = compose(first, reverse);
getLast([1, 2, 3, 4, 5]); // 5
```

- å‡½æ•°ç»„åˆè®©å‡½æ•°ä¹‹é—´çš„è°ƒç”¨æ›´åŠ çµæ´»ã€‚

```js
compose(f, compose(g, h));
compose(compose(f, g), h);
compose(f, g, h);
```

### :blue_book: å‡½æ•°ç»„åˆå­

- compose å‡½æ•°åªèƒ½ç»„åˆæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç±»ä¼¼ mapã€filter è¿™äº›æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼ˆä¹Ÿå«æŠ•å½±å‡½æ•°ï¼šæ€»æ˜¯åœ¨åº”ç”¨é‡Œåšè½¬æ¢æ“ä½œï¼Œé€šè¿‡ä¼ å…¥é«˜é˜¶å‚æ•°åè¿”å›æ•°ç»„ï¼‰ï¼Œä¸èƒ½è¢«ç›´æ¥ç»„åˆã€‚**å¯ä»¥å€ŸåŠ©åå‡½æ•°åŒ…è£¹åç»§ç»­ç»„åˆ**ã€‚

- å‡½æ•°ç»„åˆçš„æ•°æ®æµæ˜¯**ä»å³è‡³å·¦**çš„ï¼Œå› ä¸ºæœ€å³è¾¹çš„å‡½æ•°é¦–å…ˆè¢«æ‰§è¡Œï¼Œç„¶åå°†æ•°æ®ä¼ é€’ç»™ä¸‹ä¸€ä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½†æ˜¯æœ‰äººå–œæ¬¢è®©æœ€å·¦è¾¹çš„å…ˆæ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥å®ç° pipeï¼ˆå¯ç§°ä¸ºç®¡é“ã€åºåˆ—ï¼‰æ¥å®ç°ã€‚å®ƒå’Œ compose å‡½æ•°æ‰€åšçš„äº‹æƒ…ä¸€æ ·ï¼Œåªä¸è¿‡äº¤æ¢äº†æ•°æ®æ–¹å‘ã€‚

- å› æ­¤æˆ‘ä»¬éœ€è¦**ç»„åˆå­**ç®¡ç†ç¨‹åºçš„æ§åˆ¶æµã€‚

- ç»„åˆå­å¯ä»¥ç»„åˆå…¶ä»–å‡½æ•°ï¼ˆæˆ–å…¶ä»–ç»„åˆå­ï¼‰ï¼Œå¹¶ä½œä¸ºæ§åˆ¶é€»è¾‘å•å…ƒçš„é«˜é˜¶å‡½æ•°ï¼Œç»„åˆå­é€šå¸¸ä¸å£°æ˜ä»»ä½•å˜é‡ï¼Œä¹Ÿä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œå®ƒä»¬æ—¨åœ¨ç®¡ç†å‡½æ•°ç¨‹åºæ‰§è¡Œæµç¨‹ï¼Œå¹¶åœ¨é“¾å¼è°ƒç”¨ä¸­å¯¹ä¸­é—´ç»“æœè¿›è¡Œæ“ä½œã€‚

- å¸¸è§çš„ç»„åˆå­

**ï¼ˆ1ï¼‰è¾…åŠ©ç»„åˆå­**

æ— ä¸ºï¼ˆnothingï¼‰ã€ç…§æ—§ï¼ˆidentityï¼‰ã€é»˜è®¸ï¼ˆdefaultToï¼‰ã€æ’å®šï¼ˆalwaysï¼‰

**ï¼ˆ2ï¼‰å‡½æ•°ç»„åˆå­**

æ”¶ç¼©ï¼ˆgatherï¼‰ã€å±•å¼€ï¼ˆspreadï¼‰ã€é¢ å€’ï¼ˆreverseï¼‰ã€å·¦åï¼ˆpartialï¼‰ã€å³åï¼ˆpartialRightï¼‰ã€æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰ã€å¼ƒç¦»ï¼ˆtapï¼‰ã€äº¤æ›¿ï¼ˆaltï¼‰ã€è¡¥æ•‘ï¼ˆtryCatchï¼‰ã€åŒæ—¶ï¼ˆseqï¼‰ã€èšé›†ï¼ˆconvergeï¼‰ã€æ˜ å°„ï¼ˆmapï¼‰ã€åˆ†æ¡ï¼ˆuseWithï¼‰ã€è§„çº¦ï¼ˆreduceï¼‰ã€ç»„åˆï¼ˆcomposeï¼‰

**ï¼ˆ3ï¼‰è°“è¯­ç»„åˆå­**

è¿‡æ»¤ï¼ˆfilterï¼‰ã€åˆ†ç»„ï¼ˆgroupï¼‰ã€æ’åºï¼ˆsortï¼‰

**ï¼ˆ4ï¼‰å…¶å®ƒ**

ç»„åˆå­å˜æ¢ juxt

ä»¥ä¸Šç»„åˆå­åˆ†å±äº **SKI ç»„åˆå­**ã€‚

lodash é‡Œçš„æ‰€æœ‰æ–¹æ³•å®é™…ä¸Šç”¨çš„å°±æ˜¯ç»„åˆå­çš„æ¦‚å¿µï¼Œå®ƒä»¬éƒ½æ˜¯ä¸ºäº†å¸®ä½ æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚

### :blue_book: Point Free

- **æŠŠä¸€äº›å¯¹è±¡è‡ªå¸¦çš„æ–¹æ³•è½¬åŒ–æˆçº¯å‡½æ•°ï¼Œä¸è¦å‘½åè½¬ç¬å³é€çš„ä¸­é—´å˜é‡**ã€‚æ¯”å¦‚ï¼š

```js
const f = str => str.toUpperCase().split('');
```

è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† str ä½œä¸ºæˆ‘ä»¬çš„ä¸­é—´å˜é‡ï¼Œä½†æ˜¯è¿™ä¸ªä¸­é—´å˜é‡é™¤äº†è®©ä»£ç å˜å¾—é•¿ä¸€ç‚¹ä¹‹å¤–æ¯«æ— æ„ä¹‰ã€‚

é‡‡ç”¨ Point Free é£æ ¼æ”¹é€ ä¸‹ï¼š

```js
var toUpperCase = word => word.toUpperCase();
var split = x => (str => str.split(x));

var f = compose(split(''), toUpperCase);

f('abcd efgh');
```

è¿™ç§é£æ ¼èƒ½å¤Ÿå¸®æˆ‘ä»¬å‡å°‘ä¸å¿…è¦çš„å‘½åï¼Œè®©ä»£ç ä¿æŒç®€æ´å’Œé€šç”¨ã€‚

### :blue_book: å£°æ˜å¼ä¸å‘½ä»¤å¼ä»£ç 

- å‘½ä»¤å¼ä»£ç å°±æ˜¯ï¼Œæˆ‘ä»¬é€šè¿‡ç¼–å†™ä¸€æ¡åˆä¸€æ¡æŒ‡ä»¤è®©è®¡ç®—æœºæ‰§è¡Œä¸€äº›åŠ¨ä½œï¼Œè¿™å…¶ä¸­ä¸€èˆ¬éƒ½ä¼šæ¶‰åŠåˆ°å¾ˆå¤šç¹æ‚çš„ç»†èŠ‚ã€‚

- å£°æ˜å¼ä»£ç å°±è¦ä¼˜é›…å¾ˆå¤šäº†ï¼Œæˆ‘ä»¬é€šè¿‡ç¼–å†™è¡¨è¾¾å¼çš„æ–¹å¼æ¥å£°æ˜æˆ‘ä»¬æƒ³å¹²ä»€ä¹ˆï¼Œè€Œä¸æ˜¯é€šè¿‡ä¸€æ­¥ä¸€æ­¥çš„æŒ‡ç¤ºã€‚

```js
// å‘½ä»¤å¼
let CEOs = [];
for (let i = 0; i < companies.length; i++) {
    CEOs.push(companies[i].CEO);
}

// å£°æ˜å¼
let CEOs = companies.map(c => c.CEO);
```

- ä¼˜ç¼ºç‚¹

ï¼ˆ1ï¼‰å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªæ˜æ˜¾çš„å¥½å¤„å°±æ˜¯è¿™ç§å£°æ˜å¼çš„ä»£ç ï¼Œå¯¹äºæ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä¸è€ƒè™‘å‡½æ•°å†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä¸“æ³¨äºç¼–å†™ä¸šåŠ¡ä»£ç ã€‚ä¼˜åŒ–ä»£ç æ—¶ï¼Œç›®å…‰åªéœ€è¦é›†ä¸­åœ¨è¿™äº›ç¨³å›ºçš„å‡½æ•°å†…éƒ¨å³å¯ã€‚

ï¼ˆ2ï¼‰ç›¸åï¼Œä¸çº¯çš„å‡½æ•°ä»£ç ä¼šäº§ç”Ÿå‰¯ä½œç”¨æˆ–è€…ä¾èµ–å¤–éƒ¨ç³»ç»Ÿç¯å¢ƒï¼Œä½¿ç”¨å®ƒä»¬çš„æ—¶å€™æ€»æ˜¯è¦è€ƒè™‘è¿™äº›ä¸å¹²å‡€çš„å‰¯ä½œç”¨ã€‚åœ¨å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œè¿™å¯¹ç¨‹åºå‘˜çš„å¿ƒæ™ºæ¥è¯´æ˜¯æå¤§çš„è´Ÿæ‹…ã€‚

### :blue_book: ç±» SQL æ•°æ®ï¼šå‡½æ•°å³æ•°æ®

```sql
select p.firstname from persons p where ... group by ...
```

```js
_mixin({
    'select': _.pluck,
    'from': _.chain,
    'where': _.filter,
    'groupby': _.sortByOrder
})

const persons = {};

_.from(persons).where().select().value();
```

ä»¥å‡½æ•°å½¢å¼å¯¹æ•°æ®å»ºæ¨¡ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å³æ•°æ®ã€‚å£°æ˜å¼çš„æè¿°äº†æ•°æ®è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ•°æ®æ˜¯å¦‚ä½•å¾—åˆ°çš„ã€‚

### :blue_book: æƒ°æ€§é“¾ã€æƒ°æ€§æ±‚å€¼ã€æƒ°æ€§å‡½æ•°

```js
_.chain(data).map().reverse().value()
```

- æƒ°æ€§é“¾å¯ä»¥æ·»åŠ ä¸€ä¸ªè¾“å…¥å¯¹è±¡çš„çŠ¶æ€ï¼Œä»è€Œèƒ½å¤Ÿå°†è¿™äº›è¾“å…¥è½¬æ¢ä¸ºæ‰€éœ€çš„è¾“å‡ºæ“ä½œé“¾æ¥åœ¨ä¸€èµ·ã€‚ä¸ç®€å•çš„æ•°ç»„æ“ä½œä¸ä¸€æ ·ï¼Œå°½ç®¡å®ƒæ˜¯ä¸€ä¸ªå¤æ‚çš„ç¨‹åºï¼Œä½†ä»ç„¶å¯ä»¥é¿å…åˆ›å»ºä»»ä½•å˜é‡ï¼Œå¹¶ä¸”æœ‰æ•ˆæ¶ˆé™¤æ‰€æœ‰å¾ªç¯ã€‚è€Œä¸”**åœ¨æœ€åè°ƒç”¨ value ä¹‹å‰å¹¶ä¸ä¼šçœŸæ­£çš„æ‰§è¡Œä»»ä½•æ“ä½œ**ã€‚è¿™å°±æ˜¯æ‰€è°“çš„**æƒ°æ€§é“¾**ã€‚

```js
// _.chain å¯ä»¥æ¨æ–­å¯ä¼˜åŒ–ç‚¹ï¼Œå¦‚åˆå¹¶æ‰§è¡Œæˆ–å­˜å‚¨ä¼˜åŒ–
// åˆå¹¶å‡½æ•°æ‰§è¡Œå¹¶å‹ç¼©è®¡ç®—è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ä¸´æ—¶æ•°æ®ç»“æ„ï¼Œé™ä½å†…å­˜å ç”¨
const trace = msg => console.log(msg);
let square = x => Math.pow(x, 2);
let isEven = x => x % 2 === 0;

// ä½¿ç”¨ç»„åˆå­è·Ÿè¸ª
square = R.compose(R.tap(() => trace('map æ•°ç»„')), square);
isEven = R.compose(R.tap(() => trace('filter æ•°ç»„')), isEven);

const numbers = _.range(200);
const result = _.chain(numbers)
                .map(square)
                .filter(isEven)
                .take(3)
                .value();
console.log(result);
```

- å½“è¾“å…¥å¾ˆå¤§ä½†åªæœ‰ä¸€ä¸ªå°çš„å­é›†æœ‰æ•ˆæ—¶ï¼Œé¿å…ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨å°±æ˜¯æ‰€è°“çš„**æƒ°æ€§æ±‚å€¼**ã€‚æƒ°æ€§æ±‚å€¼æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¦‚ç»„åˆå­ï¼ˆaltï¼Œç±»ä¼¼äº ||ï¼Œå…ˆè®¡ç®— fun1ï¼Œå¦‚æœè¿”å›å€¼æ˜¯ falseã€nullã€undefinedï¼Œå°±ä¸å†æ‰§è¡Œfunc2ï¼‰ï¼Œä½†æ˜¯ç›®çš„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå³å°½å¯èƒ½çš„æ¨è¿Ÿæ±‚å€¼ï¼Œç›´åˆ°ä¾èµ–çš„è¡¨è¾¾å¼è¢«è°ƒç”¨ã€‚

```js
const alt = _.curry((func1, fun2, val) => fun1(val) || fun2(val));
const showStudent = _.compose(å‡½æ•°ä½“1, alt(xx1, xx2));
showStudent({});
```

```js
var object = {a: 'xx', b: 2};
var values = _.memoize(_.values);
values(object);
object.a = 'hello';
console.log(values.cache.get(object)); // ["xx", 2]
```

- **æƒ°æ€§å‡½æ•°**å¾ˆå¥½ç†è§£ï¼Œå‡å¦‚åŒä¸€ä¸ªå‡½æ•°è¢«å¤§é‡èŒƒå›´è°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°å†…éƒ¨åˆæœ‰è®¸å¤šåˆ¤æ–­æ¥æ£€æµ‹å‡½æ•°ï¼Œè¿™æ ·å¯¹äºä¸€ä¸ªè°ƒç”¨ä¼šæµªè´¹æ—¶é—´å’Œæµè§ˆå™¨èµ„æºï¼Œæ‰€ä»¥å½“ç¬¬ä¸€æ¬¡è°ƒç”¨å®Œæˆåï¼Œç›´æ¥æŠŠè¿™ä¸ªå‡½æ•°æ”¹å†™ï¼Œä¸å†éœ€è¦åˆ¤æ–­ã€‚

```js
// åˆ¤æ–­æµè§ˆå™¨çš„ Ajax å¯¹è±¡
function createXHR() {
    var xhr = null;
    if (typeof XMLHttpRequest !== 'undefined') {
        xhr = new XMLHttpRequest();
        createXHR = function() {
            return XMLHttpRequest(); // ç›´æ¥è¿”å›ä¸€ä¸ªæ‡’å‡½æ•°ï¼Œè¿™æ ·æ²¡å¿…è¦å†å¾€ä¸‹èµ°
        }
    } else {
        try { 
            xhr = new ActiveXObject('Msxml2.XMLHTTP');
            createXHR = function() {
                return new ActiveXObject('Msxml2.XMLHTTP');
            }
        } catch(e) {
            try {
                xhr = new ActiveXObject('Microsoft.XMLHTTP');
                createXHR = function() {
                    return new ActiveXObject('Microsoft.XMLHTTP');
                }
            } catch(e) {
                createXHR = function() {
                    return null;
                }
            }
        }
    }
}
```

## :books: å‡½æ•°å¼ç¼–ç¨‹æ›´æ·±å…¥çš„æ¦‚å¿µ

- é«˜é˜¶å‡½æ•°

- å°¾è°ƒç”¨ä¼˜åŒ– PTC

- é—­åŒ…

- å®¹å™¨ã€Functor

- é”™è¯¯å¤„ç†ã€Eitherã€AP

- IO

- Monad

### :blue_book: é«˜é˜¶å‡½æ•°

å‡½æ•°å½“å‚æ•°ï¼ŒæŠŠä¼ å…¥çš„å‡½æ•°åšä¸€ä¸ªå°è£…ï¼Œç„¶åè¿”å›è¿™ä¸ªå°è£…çš„å‡½æ•°ï¼Œè¾¾åˆ°æ›´é«˜ç¨‹åº¦çš„æŠ½è±¡ã€‚

- å®ƒæ˜¯ä¸€ç­‰å…¬æ°‘

- å®ƒä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°

- å®ƒä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¿”å›ç»“æœ

```js
// å‘½ä»¤å¼
var add = function(a, b) {
    return a + b;
}
function math(func, array) {
    return func(array[0], array[1]);
}
math(add, [1, 2]); // 3
```

### :blue_book: å°¾è°ƒç”¨ä¼˜åŒ–

- æŒ‡**å‡½æ•°å†…éƒ¨çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯å‡½æ•°è°ƒç”¨**ã€‚è¯¥è°ƒç”¨çš„è¿”å›å€¼ï¼Œç›´æ¥è¿”å›ç»™å‡½æ•°ã€‚

- å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸º**é€’å½’**ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸º**å°¾é€’å½’**ã€‚

- é€’å½’éœ€è¦ä¿å­˜å¤§é‡çš„è°ƒç”¨è®°å½•ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿæ ˆæº¢å‡ºé”™è¯¯ã€‚å¦‚æœä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–ï¼Œå°†é€’å½’å˜ä¸ºå¾ªç¯ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿å­˜ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œè¿™æ ·å°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºé”™è¯¯äº†ã€‚

```js
// ä¸æ˜¯å°¾é€’å½’ï¼Œæ— æ³•ä¼˜åŒ–æ–æ³¢é‚£å¥‘æ•°åˆ—
function factorial(n) {
    if (n === 1) return 1;
    return n * factorial(n - 1);
}
```

```js
// å°¾é€’å½’
function factorial(n ,total) {
    if (n === 1) return total;
    return factorial(n - 1, n * total);
}
```

::: warning æ³¨æ„
å¹¶ä¸æ˜¯è¯´å°¾é€’å½’ä¸€å®šä¸ä¼šçˆ†æ ˆï¼Œåªæ˜¯ä¸å®¹æ˜“çˆ†æ ˆã€‚
:::

- æµè§ˆå™¨ä¹‹æ‰€ä»¥ä¸æ”¯æŒå°¾é€’å½’ï¼Œæ˜¯å› ä¸ºä¼šä¸¢å¤±å †æ ˆä¿¡æ¯ã€‚å¦‚æœæµè§ˆå™¨å¼€å¯äº†ï¼Œé‚£ä¹ˆå°±åªä¼šæ˜¾ç¤ºæœ€åä¸€æ­¥è°ƒç”¨ï¼Œä¹‹å‰çš„éƒ½ä¼šéšè—æ‰ï¼Œå› æ­¤å°±æ— æ³•è¿½è¸ªåˆ°å †æ ˆä¿¡æ¯ã€‚

- å¼ºåˆ¶å¼€å¯å°¾é€’å½’çš„æ–¹å¼æœ‰3ç§ï¼š

```js
return continue
!return
#function()
```

- å°¾é€’å½’çš„åˆ¤æ–­æ ‡å‡†æ˜¯å‡½æ•°è¿è¡Œçš„æœ€åä¸€æ­¥æ˜¯å¦è°ƒç”¨è‡ªèº«ï¼Œè€Œä¸æ˜¯æ˜¯å¦åœ¨å‡½æ•°çš„æœ€åä¸€è¡Œè°ƒç”¨è‡ªèº«ã€‚æœ€åä¸€è¡Œè°ƒç”¨å…¶å®ƒå‡½æ•°å¹¶è¿”å›å«ä½œ**å°¾è°ƒç”¨**ã€‚

- å°¾é€’å½’è°ƒç”¨æ ˆæ°¸è¿œéƒ½æ˜¯æ›´æ–°å½“å‰çš„æ ˆå¸§è€Œå·²ï¼Œè¿™æ ·å°±é¿å…äº†çˆ†æ ˆçš„å±é™©ã€‚ä½†æ˜¯å¦‚ä»Šçš„æµè§ˆå™¨å¹¶æœªå®Œå…¨æ”¯æŒï¼ŒåŸå› æœ‰äºŒï¼š

  I. åœ¨å¼•æ“å±‚é¢æ¶ˆé™¤é€’å½’æ˜¯ä¸€ä¸ªéšå¼çš„è¡Œä¸ºï¼Œç¨‹åºå‘˜æ„è¯†ä¸åˆ°ã€‚

  II. å †æ ˆä¿¡æ¯ä¸¢å¤±äº†ï¼Œå¼€å‘è€…éš¾ä»¥è°ƒè¯•ã€‚

- æ—¢ç„¶æµè§ˆå™¨ä¸æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›é€’å½’å†™æˆ `while`ã€‚

æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚

```js
// ç›´æ¥çˆ†æ ˆäº†
function runStack(n) {
    if (n === 0) return 100;
    return runStack(n - 2);
}
runStack(50000); // Uncaught RangeError: Maximum call stack size exceeded
```

å¯ä»¥ä½¿ç”¨ while è§£å†³ï¼š

```js
// æ­£å¸¸è¾“å‡ºï¼Œä¸ä¼šçˆ†æ ˆ
function runStack(n) {
    while (true) {
        if (n === 0) {
            return 100;
        }
        n = n - 2;
    }
}
runStack(50000);
```

ä¹Ÿå¯ä»¥ä½¿ç”¨è¹¦åºŠå‡½æ•°è§£å†³ï¼š

```js
// æ­£å¸¸è¾“å‡ºï¼Œä¸ä¼šçˆ†æ ˆ
function runStack(n) {
    if (n === 0) return 100;
    return runStack.bind(null, n - 2); // è¿”å›è‡ªèº«çš„ä¸€ä¸ªç‰ˆæœ¬
}
function trampoline(f) {
    while (f && f instanceof Function) {
        f = f();
    }
    return f;
}
trampoline(runStack(50000));
```

::: warning æ³¨æ„
while å¾ªç¯çš„é£é™©å°±æ˜¯ä¼šé™·å…¥æ­»å¾ªç¯ï¼Œä¸»çº¿ç¨‹ä¼šæ­»æ‰ï¼Œæ‰€ä»¥è¦è®°å¾—ç»ˆæ­¢å®ƒã€‚è€Œçˆ†æ ˆæ˜¯å†…å­˜ä¸å¤Ÿç”¨ï¼Œä¸»çº¿ç¨‹è¿˜åœ¨ã€‚
:::

### :blue_book: é—­åŒ…

```js
function makePowerFn(power) {
    function powerFn(base) {
        return Math.pow(base, power);
    }
    return powerFn;
}
var square = makePowerFn(2);
square(3); // 9
```

è™½ç„¶å¤–å±‚çš„ makePowerFn å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆä¸Šçš„è°ƒç”¨å¸§è¢«é‡Šæ”¾ï¼Œä½†æ˜¯å †ä¸Šçš„ä½œç”¨åŸŸå¹¶ä¸è¢«é‡Šæ”¾ï¼Œå› æ­¤ power ä¾æ—§å¯ä»¥è¢« powerFn å‡½æ•°è®¿é—®ï¼Œè¿™æ ·å°±å½¢æˆäº†é—­åŒ…ã€‚

### :blue_book: èŒƒç•´ä¸å®¹å™¨

1. æˆ‘ä»¬å¯ä»¥æŠŠèŒƒç•´æƒ³åƒæˆä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢åŒ…å«ä¸¤æ ·ä¸œè¥¿ï¼Œ**å€¼**å’Œ**å€¼çš„å˜å½¢å…³ç³»ï¼ˆå³å‡½æ•°ï¼‰**ã€‚

2. èŒƒç•´è®ºä½¿ç”¨å‡½æ•°ï¼Œè¡¨è¾¾èŒƒç•´ä¹‹é—´çš„å…³ç³»ã€‚

3. ä¼´éšç€èŒƒç•´è®ºçš„å‘å±•ï¼Œå°±å‘å±•å‡ºä¸€æ•´å¥—å‡½æ•°çš„è¿ç®—æ–¹æ³•ã€‚è¿™å¥—æ–¹æ³•èµ·åˆåªç”¨äºæ•°å­¦è¿ç®—ï¼Œåæ¥æœ‰äººå°†å®ƒåœ¨è®¡ç®—æœºä¸Šå®ç°äº†ï¼Œå°±å˜æˆäº†ä»Šå¤©çš„å‡½æ•°å¼ç¼–ç¨‹ã€‚

4. **æœ¬è´¨ä¸Šï¼Œå‡½æ•°å¼ç¼–ç¨‹åªæ˜¯èŒƒç•´è®ºçš„è¿ç®—æ–¹æ³•**ï¼Œè·Ÿæ•°ç†é€»è¾‘ã€å¾®ç§¯åˆ†ã€è¡Œåˆ—å¼æ˜¯åŒä¸€ç±»ä¸œè¥¿ï¼Œéƒ½æ˜¯æ•°å­¦æ–¹æ³•ï¼Œåªæ˜¯ç¢°å·§å®ƒèƒ½ç”¨æ¥å†™ç¨‹åºã€‚ä¸ºä»€ä¹ˆå‡½æ•°å¼ç¼–ç¨‹è¦æ±‚å‡½æ•°å¿…é¡»æ˜¯çº¯çš„ï¼Ÿ**å› ä¸ºå®ƒæ˜¯ä¸€ç§æ•°å­¦è¿ç®—ï¼ŒåŸå§‹ç›®çš„æ˜¯æ±‚å€¼ï¼Œä¸åšå…¶ä»–äº‹æƒ…ï¼Œå¦åˆ™å°±æ— æ³•æ»¡è¶³å‡½æ•°è¿ç®—æ³•åˆ™äº†**ã€‚

### :blue_book: å‡½å­ Functor

1. å‡½æ•°ä¸ä»…å¯ä»¥ç”¨äºåŒä¸€ä¸ªèŒƒç•´ä¸­å€¼çš„è½¬æ¢ï¼Œè¿˜å¯ä»¥ç”¨äºå°†ä¸€ä¸ªèŒƒç•´è½¬æˆå¦ä¸€ä¸ªèŒƒç•´ã€‚è¿™å°±æ¶‰åŠåˆ°äº†å‡½å­ï¼ˆFunctorï¼‰ã€‚

2. **å‡½å­æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­æœ€é‡è¦çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯åŸºæœ¬çš„è¿ç®—å•ä½å’ŒåŠŸèƒ½å•ä½**ã€‚å®ƒé¦–å…ˆæ˜¯ä¸€ç§èŒƒç•´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯ä¸€ä¸ªå®¹å™¨ï¼ŒåŒ…å«äº†å€¼å’Œå˜å½¢å…³ç³»ã€‚æ¯”è¾ƒç‰¹æ®Šçš„æ˜¯ï¼Œå®ƒçš„å˜å½¢å…³ç³»å¯ä»¥ä¾æ¬¡ä½œç”¨äºæ¯ä¸€ä¸ªå€¼ï¼Œå°†å½“å‰å®¹å™¨å˜å½¢æˆå¦ä¸€ä¸ªå®¹å™¨ã€‚

3. jQuery çš„ $() è¿”å›çš„å¯¹è±¡å¹¶ä¸æ˜¯ä¸€ä¸ªåŸç”Ÿçš„ DOM å¯¹è±¡ï¼Œè€Œæ˜¯å¯¹äºåŸç”Ÿå¯¹è±¡çš„ä¸€ç§å°è£…ï¼Œè¿™åœ¨æŸç§æ„ä¹‰ä¸Šå°±æ˜¯ä¸€ä¸ªâ€œå®¹å™¨â€œï¼ˆä½†å®ƒå¹¶ä¸æ˜¯å‡½æ•°å¼çš„ï¼‰ã€‚

4. Functor æ˜¯éµå®ˆä¸€äº›ç‰¹å®šè§„åˆ™çš„å®¹å™¨ç±»å‹ã€‚

5. Functor æ˜¯ä¸€ä¸ªå¯¹äºå‡½æ•°è°ƒç”¨æŠ½è±¡ï¼Œæˆ‘ä»¬èµ‹äºˆå®¹å™¨è‡ªå·±å»è°ƒç”¨å‡½æ•°çš„èƒ½åŠ›ã€‚**æŠŠä¸œè¥¿è£…è¿›ä¸€ä¸ªå®¹å™¨ï¼Œåªç•™å‡ºä¸€ä¸ªæ¥å£ map ç»™å®¹å™¨å¤–çš„å‡½æ•°ï¼Œmap ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬è®©å®¹å™¨è‡ªå·±æ¥è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè¿™æ ·å®¹å™¨å°±å¯ä»¥è‡ªç”±çš„é€‰æ‹©ä½•æ—¶ä½•åœ°å¦‚ä½•æ“ä½œè¿™ä¸ªå‡½æ•°**ï¼Œä»¥è‡´äºæ‹¥æœ‰æƒ°æ€§æ±‚å€¼ã€é”™è¯¯å¤„ç†ã€å¼‚æ­¥è°ƒç”¨ç­‰éå¸¸å¼ºå¤§çš„ç‰¹æ€§ã€‚

```js
var Container = function(x) {
    this._value = x;
}

// å‡½æ•°å¼ç¼–ç¨‹ä¸€èˆ¬çº¦å®šï¼Œå‡½å­æœ‰ä¸€ä¸ª of æ–¹æ³•
Container.of = x => new Container(x);

// ä¸€èˆ¬çº¦å®šï¼Œå‡½å­çš„æ ‡å¿—å°±æ˜¯å®¹å™¨å…·æœ‰ map æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†å®¹å™¨é‡Œçš„æ¯ä¸ªå€¼ï¼Œæ˜ å°„åˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚
Container.prototype.map = function(f) {
    return Container.of(f(this._value));
}

Container.of(3)
    .map(x => x + 1) // Container(4)
    .map(x => 'Result is ' + x); // Container('Result is 4')
```

6. ES6 åˆ›å»ºä¸€ä¸ªç®€å•çš„å‡½å­ã€‚

```js
class Functor {
    constructor(val) {
        this.val = val;
    } 
    map(f) {
        return new Functor(f(this.val));
    }
}
(new Functor(2)).map(function(two) {
    return two + 2;
}) // Functor(4)
```

7. ä¸Šé¢çš„ä¾‹å­è¯´æ˜ï¼Œ**å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢çš„è¿ç®—ï¼Œéƒ½æ˜¯é€šè¿‡å‡½å­å®Œæˆï¼Œå³è¿ç®—ä¸ç›´æ¥é’ˆå¯¹å€¼ï¼Œè€Œæ˜¯é’ˆå¯¹è¿™ä¸ªå€¼çš„å®¹å™¨â€”â€”å‡½å­**ã€‚å‡½å­æœ¬èº«å…·æœ‰å¯¹å¤–æ¥å£ï¼ˆmap æ–¹æ³•ï¼‰ï¼Œå„ç§å‡½æ•°å°±æ˜¯è¿ç®—ç¬¦ï¼Œé€šè¿‡æ¥å£æ¥å…¥å®¹å™¨ï¼Œå¼•å‘å®¹å™¨é‡Œé¢çš„å€¼çš„å˜å½¢ã€‚

8. å› æ­¤ï¼Œ**å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ï¼Œå®é™…ä¸Šå°±æ˜¯å­¦ä¹ å‡½å­çš„å„ç§è¿ç®—**ã€‚ç”±äºå¯ä»¥æŠŠè¿ç®—æ–¹æ³•å°è£…åœ¨å‡½å­é‡Œé¢ï¼Œæ‰€ä»¥åˆè¡ç”Ÿå‡ºå„ç§ä¸åŒç±»å‹çš„å‡½å­ï¼Œ**æœ‰å¤šå°‘ç§è¿ç®—ï¼Œå°±æœ‰å¤šå°‘ç§å‡½å­ã€‚å‡½æ•°å¼ç¼–ç¨‹å°±å˜æˆäº†è¿ç”¨ä¸åŒçš„å‡½å­ï¼Œè§£å†³å®é™…é—®é¢˜**ã€‚

### :blue_book: Pointed å‡½å­

1. å‡½å­åªæ˜¯ä¸€ä¸ªå®ç°äº† map å¥‘çº¦çš„æ¥å£ã€‚Pointed å‡½å­æ˜¯ä¸€ä¸ªå‡½å­çš„å­é›†ã€‚

2. ç”Ÿæˆæ–°çš„å‡½å­æ—¶ï¼Œä½¿ç”¨äº† new å‘½ä»¤ï¼Œè¿™æ˜¯åœ¨å¤ªä¸åƒå‡½æ•°å¼ç¼–ç¨‹äº†ï¼Œå› ä¸º new å‘½ä»¤æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ‡å¿—ã€‚å‡½æ•°å¼ç¼–ç¨‹ä¸€èˆ¬çº¦å®šï¼Œå‡½å­æœ‰ä¸€ä¸ª of æ–¹æ³•ï¼Œç”¨æ¥ç”Ÿæˆæ–°çš„å®¹å™¨ã€‚

```js
Functor.of = function(val) {
    return new Functor(val);
}
Functor.of(2).map(function(two) {
    return two + 2;
}) // Functor(4)
```

```js
// æ•°ç»„æˆä¸ºä¸€ä¸ª Pointed å‡½å­
Array.of('123');
```

### :blue_book: Maybe å‡½å­

1. **Maybe ç”¨äºå¤„ç†é”™è¯¯å’Œå¼‚å¸¸**ã€‚

2. å‡½å­æ¥æ”¶å„ç§å‡½æ•°ï¼Œå¤„ç†å®¹å™¨é‡Œçš„å€¼ã€‚è¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå®¹å™¨å†…éƒ¨çš„å€¼å¯èƒ½æ˜¯ä¸€ä¸ªç©ºå€¼ï¼ˆæ¯”å¦‚ï¼šnullï¼‰ï¼Œè€Œå¤–éƒ¨å‡½æ•°æœªå¿…æœ‰å¤„ç†ç©ºå€¼çš„æœºåˆ¶ï¼Œå¦‚æœä¼ å…¥ç©ºå€¼ï¼Œå¯èƒ½å°±ä¼šå‡ºé”™ã€‚

```js
// Maybe å‡½å­
var Maybe = function(x) {
    this.__value = x;
}
Maybe.of = function(x) {
    return new Maybe(x); 
}
Maybe.prototype.map = function(f) {
    return this.isNothing() ? Maybe.of(null) : Maybe.of(f(this.__value));
}
Maybe.prototype.isNothing = function() {
    return (this.__value === null || this.__value === undefined); 
}
```

```js
Functor.of(null).map(function(s) {
    return s.toUpperCase();
})

class Maybe extends Functor {
    map(f) {
        return this.val ? Maybe.of(f(this.val)) : Maybe.of(null);
    }
}

Maybe.of(null).map(function(s) {
    return s.toUpperCase();
}) // Maybe(null)
```

### :blue_book: Either å‡½å­

1. æˆ‘ä»¬çš„å®¹å™¨èƒ½åšçš„äº‹æƒ…å¤ªå°‘äº†ï¼Œtry/catch/throw å¹¶ä¸æ˜¯â€œçº¯â€çš„ï¼Œå› ä¸ºå®ƒä»å¤–éƒ¨æ¥ç®¡äº†æˆ‘ä»¬çš„å‡½æ•°ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªå‡½æ•°å‡ºé”™æ—¶æŠ›å¼ƒäº†å®ƒçš„è¿”å›å€¼ã€‚

2. Promise æ˜¯å¯ä»¥è°ƒç”¨ catch æ¥é›†ä¸­å¤„ç†é”™è¯¯çš„ã€‚

3. äº‹å®ä¸Š Either å¹¶ä¸åªæ˜¯ç”¨æ¥åšé”™è¯¯å¤„ç†çš„ï¼Œå®ƒè¡¨ç¤ºäº†é€»è¾‘æˆ–ï¼ŒèŒƒç•´å­¦é‡Œçš„ coproducã€‚

4. æ¡ä»¶è¿ç®— if ... else ... æ˜¯æœ€å¸¸è§çš„è¿ç®—ä¹‹ä¸€ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œï¼Œä½¿ç”¨ Either å‡½å­è¡¨è¾¾ã€‚

5. Either å‡½å­å†…éƒ¨æœ‰ä¸¤ä¸ªå€¼ï¼š**å·¦å€¼ï¼ˆLeftï¼‰**å’Œ**å³å€¼ï¼ˆRightï¼‰**ã€‚**å³å€¼æ˜¯åœ¨æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨çš„å€¼ï¼Œå·¦å€¼æ˜¯å³å€¼ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼**ã€‚

```js
class Either extends Functor {
    constructor(left, right) {
        this.left = left;
        this.right = right;
    }
    map(f) {
        return this.right ?
            Either.of(this.left, f(this.right)) :
            Either.of(f(this.left), this.right); 
    }
}
Either.of = function (left, right) {
    return new Either(left, right);
};

var addOne = function (x) {
    return x + 1;
};
Either.of(5, 6).map(addOne); // Either(5, 7);
Either.of(1, null).map(addOne); // Either(2, null);
Either.of({address: 'xxx'}, currentUser.address).map(updateField);
```

```js
var Left = function(x) {
    this._value = x;
}
var Right = function(x) {
    this._value = x;
}
Left.of = function(x) {
    return new Left(x);
}
Right.of = function(x) {
    return new Right(x);
}

// è¿™é‡Œä¸åŒï¼
Left.prototype.map = function(f) {
    return this;
}
Right.prototype.map = function(f) {
    return Right.of(f(this._value));
}
```

6. **Left å’Œ Right å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ map æ–¹æ³•çš„å®ç°**ã€‚Right.map çš„è¡Œä¸ºè·Ÿæˆ‘ä»¬ä¹‹å‰æåˆ°çš„ map å‡½æ•°ä¸€æ ·ã€‚ä½†æ˜¯ Left.map å°±å¾ˆä¸åŒäº†ï¼šå®ƒä¸ä¼šå¯¹å®¹å™¨åšä»»ä½•äº‹æƒ…ï¼Œåªæ˜¯å¾ˆç®€å•çš„æŠŠè¿™ä¸ªå®¹å™¨æ‹¿è¿›æ¥åˆæ‰”å‡ºå»ã€‚è¿™ä¸ªç‰¹æ€§æ„å‘³ç€ï¼ŒLeft å¯ä»¥ç”¨æ¥ä¼ é€’ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ã€‚

```js
var getAge = user => user.age ? Right.of(user.age) : Left.of("ERROR!");
getAge({ name: 'stark', age: '21' }).map(age => 'Age is ' + age); //=> Right('Age is 21')
getAge({ name: 'stark' }).map(age => 'Age is ' + age); //=> Left('ERROR!')
```

Left å¯ä»¥è®©è°ƒç”¨é“¾ä¸­ä»»æ„ä¸€ç¯çš„é”™è¯¯ç«‹åˆ»è¿”å›åˆ°è°ƒç”¨é“¾å°¾éƒ¨ï¼Œè¿™ç»™æˆ‘ä»¬é”™è¯¯å¤„ç†å¸¦æ¥äº†å¾ˆå¤§çš„æ–¹ä¾¿ï¼Œå†ä¹Ÿä¸ç”¨ä¸€å±‚ä¸€å±‚çš„ try/catchã€‚

### :blue_book: AP å‡½å­

1. å‡½å­é‡Œé¢åŒ…å«çš„å€¼ï¼Œå®Œå…¨å¯èƒ½æ˜¯å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ç§æƒ…å†µï¼Œä¸€ä¸ªå‡½å­çš„å€¼æ˜¯æ•°å€¼ï¼Œå¦ä¸€ä¸ªå‡½å­çš„å€¼æ˜¯å‡½æ•°ã€‚

```js
class Ap extends Functor {
    ap(F) {
        return Ap.of(this.val(F.val));
    }
}

Ap.of(addTwo).ap(Functor.of(2));
```

### :blue_book: IO

1. çœŸæ­£çš„å‡½æ•°æ€»æ˜¯è¦å»æ¥è§¦è‚®è„çš„ä¸–ç•Œã€‚

```js
function readLocalStorage() {
    return window.localStorage;
}
```

2. IO è·Ÿå‰é¢é‚£å‡ ä¸ª Functor ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œ**å®ƒçš„ _value æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å®ƒæŠŠä¸çº¯çš„æ“ä½œï¼ˆæ¯”å¦‚ IOã€ç½‘ç»œè¯·æ±‚ã€DOMï¼‰åŒ…è£¹åˆ°ä¸€ä¸ªå‡½æ•°å†…ï¼Œä»è€Œå»¶è¿Ÿè¿™ä¸ªæ“ä½œçš„æ‰§è¡Œ**ã€‚æ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºï¼Œ**IO åŒ…å«çš„æ˜¯è¢«åŒ…è£¹çš„æ“ä½œçš„è¿”å›å€¼**ã€‚

3. IO å…¶å®ä¹Ÿç®—æ˜¯æƒ°æ€§æ±‚å€¼ã€‚

```js
import _ from 'lodash'; 
var compose = _.flowRight;
var IO = function(f) {
    this.__value = f;
}
IO.of = x => new IO(_ => x);
IO.prototype.map = function(f) {
    return new IO(compose(f, this.__value))
};
```

```js
import _ from 'lodash'; 
var compose = _.flowRight;
class IO extends Monad{
    map(f){
        return IO.of(compose(f, this.__value))
    }
}
```

```js
var fs = require('fs');
var readFile = function(filename) {
    return new IO(function() {
        return fs.readFileSync(filename, 'utf-8');
    });
};

readFile('./user.txt').flatMap(tail).flatMap(print);
// ç­‰åŒäº
readFile('./user.txt').chain(tail).chain(print)ï¼›
```

### :blue_book: Monad

1. Monad å°±æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œè¡¨ç¤ºå°†ä¸€ä¸ªè¿ç®—è¿‡ç¨‹ï¼Œé€šè¿‡å‡½æ•°æ‹†è§£æˆäº’ç›¸è¿æ¥çš„å¤šä¸ªæ­¥éª¤ã€‚ä½ åªè¦æä¾›ä¸‹ä¸€æ­¥è¿ç®—æ‰€éœ€çš„å‡½æ•°ï¼Œæ•´ä¸ªè¿ç®—å°±ä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹å»ã€‚

2. Promise å°±æ˜¯ä¸€ç§ Monadã€‚

3. Monad è®©æˆ‘ä»¬é¿å¼€äº†åµŒå¥—åœ°ç‹±ï¼Œå¯ä»¥è½»æ¾çš„è¿›è¡Œæ·±åº¦åµŒå¥—çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ¯”å¦‚ IO å’Œå…¶å®ƒå¼‚æ­¥ä»»åŠ¡ã€‚

4. è®°å¾—è®©ä¸Šé¢çš„ IO é›†æˆ Monadã€‚

5. Monad å‡½å­çš„ä½œç”¨æ˜¯ï¼Œæ€»æ˜¯è¿”å›ä¸€ä¸ªå•å±‚çš„å‡½å­ã€‚å®ƒæœ‰ä¸€ä¸ª faltMap æ–¹æ³•ï¼Œä¸ map æ–¹æ³•ä½œç”¨ç›¸åŒã€‚å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å¦‚æœç”Ÿæˆäº†ä¸€ä¸ªåµŒå¥—å‡½å­ï¼Œå®ƒä¼šå–å‡ºåè€…å†…éƒ¨çš„å€¼ï¼Œä¿è¯è¿”å›çš„æ°¸è¿œæ˜¯ä¸€ä¸ªå•å±‚çš„å®¹å™¨ï¼Œä¸ä¼šå‡ºç°åµŒå¥—çš„æƒ…å†µã€‚

```js
class Monad extends Functor {
    join() {
        return this.val; 
    }
    flatMap(f) {
        return this.map(f).join();
    }
}
```

å¦‚æœå‡½æ•° f è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½å­ï¼Œé‚£ä¹ˆ this.map(f) å°±ä¼šç”Ÿæˆä¸€ä¸ªåµŒå¥—çš„å‡½å­ã€‚æ‰€ä»¥ï¼Œjoin æ–¹æ³•ä¿è¯äº† flatMap æ–¹æ³•æ€»æ˜¯è¿”å›ä¸€ä¸ªå•å±‚çš„å‡½å­ã€‚è¿™æ„å‘³ç€åµŒå¥—çš„å‡½å­ä¼šè¢«é“ºå¹³ï¼ˆflatternï¼‰ã€‚

## :books: å½“ä¸‹å‡½æ•°å¼ç¼–ç¨‹æ¯”è¾ƒç«çƒ­çš„åº“

- [RxJS](https://cn.rx.js.org/)ï¼Œå“åº”å¼å‡½æ•°å¼ç¼–ç¨‹åº“ï¼ˆFRPï¼‰ï¼Œå¯ä»¥ç®—æ˜¯ JavaScript é¡¶çº§çš„åº“ä¹‹ä¸€äº†

- [Cycle.js](https://cycle.js.org/getting-started.html)

- [Lodash](https://www.lodashjs.com/)

- [Lazy.js](https://github.com/dtao/lazy.js/)ï¼Œæƒ°æ€§æ±‚å€¼

- [Underscore](http://underscorejs.org/)

- [Ramda](https://ramda.cn/)

## :books: å‡½æ•°å¼ç¼–ç¨‹çš„å®é™…åº”ç”¨åœºæ™¯

- æ˜“è°ƒè¯•ã€çƒ­éƒ¨ç½²ã€å¹¶å‘

- å•å…ƒæµ‹è¯•